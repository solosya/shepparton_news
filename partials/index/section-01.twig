{% set articleCount = 0 %}
{% set cardIndex = 0 %}

<section class="row" data-template="section-01">
    <div class="col-sm-9 section-header">
        <p><a class="{{site}}" href="{{link}}">View All</a></p>
        <div class="hk">
            <h2>{{ title }}</h2>
            <p></p>
        </div>
    </div>

    <div class="col-md-9 col-sm-9">
        
        <div class="row">
            
            {# Card 1 #}
            <div class="col-sm-9 col-md-6">
                {% if articles[articleCount] %}
                    {{this.render('../_single-article.twig', {
                        article: articles[articleCount], 
                        position: cardIndex, 
                        imageSize: {width:640, height:400},
                        site:site,
                        div:div,
                        containerClass: 'home-feature-sm home-feature-sm-tablet home-feature-mobile'
                    }) | raw}}
                    {% set articleCount = (dev) ? articleCount : articleCount + 1 %}
                    {% set cardIndex = cardIndex + 1 %}
                {% endif %}


                {# Card 2,3,4 #}
                <div class="row u-margin-top-30">
                    {% for i in 0..2 if articles[articleCount] %}
                        <div class="col-sm-3 col-xs-9">
                            {{this.render('../_single-article.twig', {
                                article     : articles[articleCount], 
                                imageSize   : {width:192, height:160},
                                position    : cardIndex, 
                                site        : site,
                                div         : div,
                                containerClass: 'card-sm card-sm-tablet card-sm-mobile'
                            }) | raw}}
                            {% set articleCount = (dev) ? articleCount : articleCount + 1 %}
                            {% set cardIndex = cardIndex + 1 %}

                            <hr class="divide visible-xs-block"> 
                        </div>
                                                       
                    {% endfor %}
                </div>



                <div class="row u-margin-top-30 u-mobile-no-margin-top">
                    <div class="col-sm-4 col-xs-9">
                        
                        {# Card 5,6 #}
                        {% if articles[articleCount] %}
                            {{this.render('../_single-article.twig', {
                                article: articles[articleCount], 
                                imageSize: {width:80, height: 95},
                                site:site,
                                div:div,
                                position: cardIndex, 
                                containerClass: 'feature-side card-sm-wide-tablet card-sm-mobile'
                            }) | raw}}
                            {% set articleCount = (dev) ? articleCount : articleCount + 1 %}
                            {% set cardIndex = cardIndex + 1 %}

                            <hr class="divide visible-xs-block"> 
                            {% if i < 1 %}
                            <hr class="divide10 space-only hidden-xs">
                            {% endif %}
                        {% endif %}

                        {% if articles[articleCount] %}
                            {{this.render('../_single-article.twig', {
                                article: articles[articleCount], 
                                imageSize: {width:300, height:160},
                                site:site,
                                div:div,
                                position: cardIndex, 
                                containerClass: 'card-sm-wide feature-side-tablet card-sm-mobile'
                            }) | raw}}
                            {% set articleCount = (dev) ? articleCount : articleCount + 1 %}
                            {% set cardIndex = cardIndex + 1 %}

                            <hr class="divide visible-xs-block"> 
                            {% if i < 1 %}
                            <hr class="divide10 space-only hidden-xs">
                            {% endif %}
                        {% endif %}


                    </div>



                    <div class="col-sm-5 col-xs-9">
                        
                        {# Card 7,8,9 #}
                        {% for i in 0..2 if articles[articleCount] %}

                        
                            {{this.render('../_single-article.twig', {
                                article: articles[articleCount], 
                                imageSize: {width:80, height: 95},
                                site:site,
                                div:div,
                                position: cardIndex,
                                containerClass: 'feature-side feature-side-tablet card-sm-mobile'
                            }) | raw}}
                            {% set articleCount = (dev) ? articleCount : articleCount + 1 %}
                            {% set cardIndex = cardIndex + 1 %}

                            {% if i < 2 %}
                            <hr class="divide18 hidden-xs">
                            {% endif %} 
                            <hr class="divide visible-xs-block">                            
                        {% endfor %}
                    </div>
                </div>
            </div>



            {# Side column #}
            <div class="col-sm-9 col-md-3">
                <hr class="divide15 visible-sm-block space-only">

                <div class="row">

                    {# Card 10,11,12 #}
                    {% for i in 0..2 if articles[articleCount] %}
                        <div class="col-md-9 col-sm-3 col-xs-9">
                            {{this.render('../_single-article.twig', {
                                article: articles[articleCount], 
                                imageSize: {width:300, height:160},
                                site:site,
                                div:div,
                                position: cardIndex,
                                containerClass: 'card-sm-wide card-sm-wide-tablet card-sm-mobile'
                            }) | raw}}
                            {% set articleCount = (dev) ? articleCount : articleCount + 1 %} 
                            {% set cardIndex = cardIndex + 1 %}
                            {% if i == 2 %}    
                                <div class="row">                            
                                    <hr class="divide visible-xs-block"> 
                                </div>
                            {% else %}
                                <hr class="divide10 space-only visible-md-block visible-lg-block"> 
                                <hr class="divide visible-xs-block">
                            {% endif %}   
                        </div>
                                             
                    {% endfor %}
                </div>

                <div class="ad-square {{ site }} u-margin-top-30 u-mobile-no-margin-top">
                    {% if 'shepp' in site %}
                        <script async id="soft-point-banner" src="https://viztrade.com/api/banner.js?inventory=93"></script>
                    {% else %}
                        <div class='advert-desktop advert-mobile' data-adsize="mrec"></div>
                        <div class='advert-tablet' data-adsize="banner"></div>
                    {% endif %}
                </div>
            </div>

        </div>
    </div>
</section>
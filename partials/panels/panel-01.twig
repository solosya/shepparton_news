{% set articleCount = 0 %}
{% set cardIndex = 1 %}

{% set config = _Network.getThemeConfig() %}

{% set layout = layout is defined ? layout : false %}

{% set sectionLabel = blogData['additionalInfo']['sectionlabel'] is defined and 
                      blogData['additionalInfo']['sectionlabel'] != '' 
                            ? blogData['additionalInfo']['sectionlabel'] 
                            : 'Feature' %}
{% set dev = false %}

{% set popularArticles = _Article.getPopularArticles({ limit: 5, scope: 'network', interval: 24 }) %}

<div class="row">
    <div class="container hidden-md hidden-lg u-tablet-margin-top-10 ">
        <div class="weather j-weather-panel u-tablet-float-right {{site}}"></div>
        <div class="weather-dropdown hidden j-weather-panel-dropdown {{site}}"></div>
    </div>
    <div class="col-sm-12 visible-sm-block"><hr class="divide10"></div>
</div>
{# {% set log = _AppHelper.log(articles) %} #}


<section class=""  data-template="panel 01">
    <div class="row">

        {# COLUMN 1  --  THE CENTER COLUMN ON DESKTOP #}
        <div class="col-xs-12 col-sm-12 col-md-6 col-md-push-3">
            <div class="row">
                <div class="col-xs-12 col-sm-8 col-md-12 ">

                    {# CARD 1 #}
                    {% if articles[articleCount] %}                                                                
                        {{this.render('../_single-article.twig', {
                            imageSize       : {width:640, height:445},
                            position        : cardIndex, 
                            lazyload        : false,
                            article         : articles[articleCount], 
                            site            : site,
                            swap            : false,
                            dev             : dev,
                            containerClass  : 'card-100-mobile card-100-tablet card-100-desktop-sm card-100-desktop-lg'
                        }) | raw}}
                        {% set articleCount = (dev) ? articleCount : articleCount + 1 %}
                        {% set cardIndex = cardIndex + 1 %}
                        <hr class="divide25-40">

                    {% endif %}
                </div>

                {# COLUMN 1#} 
                <div class="col-xs-12 col-sm-4 col-md-6 ">
                    <div class="row">
                        <div class="col-xs-6 col-sm-12">

                            {# CARD 2 #}
                            {{this.render('../_single-article.twig', {
                                imageSize       : {width:235},
                                position        : cardIndex, 
                                lazyload        : false,
                                article         : articles[articleCount], 
                                site            : site,
                                swap            : false,
                                dev             : dev,
                                containerClass  : 'card-102-mobile card-102-tablet card-102-desktop-sm card-102-desktop-lg'
                            }) | raw}}
                            {% set articleCount = (dev) ? articleCount : articleCount + 1 %}
                            {% set cardIndex = cardIndex + 1 %}
                            <hr class="divide25-40">
                        </div>

                        <div class="col-xs-6 col-sm-12 visible-md-block visible-lg-block">
                            {# CARD 4 #}
                            {{this.render('../_single-article.twig', {
                                imageSize       : {width:95},
                                styleType       : "image-bottom",
                                position        : cardIndex + 1, 
                                lazyload        : false,
                                article         : articles[articleCount +1], 
                                site            : site,
                                swap            : false,
                                dev             : dev,
                                containerClass  : 'card-101-mobile card-102-tablet card-101-desktop-sm card-101-desktop-lg'
                            }) | raw}}

                            {# {% set articleCount = (dev) ? articleCount : articleCount + 1 %} #}
                            {# {% set cardIndex = cardIndex + 1 %} #}
                            <hr class="divide25-40">
                        </div>



                        <div class="col-xs-6 col-sm-12 visible-xs-block visible-sm-block">
                            {# CARD 3 TABLET #}
                            {% if articles[articleCount] %}
                                {{this.render('../_single-article.twig', {
                                    imageSize       : {height:235},
                                    position        : cardIndex, 
                                    lazyload        : false,
                                    article         : articles[articleCount], 
                                    site            : site,
                                    swap            : false,
                                    dev             : dev,
                                    containerClass  : 'card-102-mobile card-102-tablet card-102-desktop-sm card-102-desktop-lg'
                                }) | raw}}

                                {# {% set articleCount = (dev) ? articleCount : articleCount %} #}
                                {# {% set cardIndex = cardIndex + 1 %} #}
                                <hr class="divide25-40">
                            {% endif %}
                        </div>


                    </div>
                </div>


                {# COLUMN 2 #}
                <div class="col-xs-12 col-md-6 ">
                    {# CARD 3  DESKTOP #}
                    {% if articles[articleCount] %}
                        {{this.render('../_single-article.twig', {
                            imageSize       : {height:235},
                            position        : cardIndex, 
                            lazyload        : false,
                            article         : articles[articleCount], 
                            site            : site,
                            swap            : false,
                            dev             : dev,
                            containerClass  : 'card-102-mobile card-102-tablet card-102-desktop-sm card-102-desktop-lg hidden-xs hidden-sm'
                        }) | raw}}

                        {% set articleCount = (dev) ? articleCount : articleCount + 2 %}
                        {% set cardIndex = cardIndex + 2 %}
                        <hr class="divide25-40 hidden-xs hidden-sm">
                    {% endif %}


                    {# CARD 4 TABLET #}
                    {% if articles[articleCount] %}
                        {{this.render('../_single-article.twig', {
                            imageSize       : {width:95},
                            styleType       : "image-bottom",
                            styleType       : "image-bottom",
                            position        : cardIndex - 1, 
                            lazyload        : false,
                            article         : articles[articleCount -1], 
                            site            : site,
                            swap            : false,
                            dev             : dev,
                            containerClass  : 'card-101-mobile card-101-tablet card-101-desktop-sm card-101-desktop-lg visible-xs-block visible-sm-block'
                        }) | raw}}
                        <hr class="divide25-40 hidden-md hidden-lg">
                    {% endif %}


                    {# CARD 5 #}
                    {% if articles[articleCount] %}
                        {{this.render('../_single-article.twig', {
                            imageSize       : {width:95},
                            styleType       : "image-bottom",
                            position        : cardIndex, 
                            lazyload        : false,
                            article         : articles[articleCount], 
                            site            : site,
                            swap            : false,
                            dev             : dev,
                            containerClass  : 'card-101-mobile card-101-tablet card-101-desktop-sm card-101-desktop-lg'
                        }) | raw}}

                        {% set articleCount = (dev) ? articleCount : articleCount + 1 %}
                        {% set cardIndex = cardIndex + 1 %}
                        <hr class="divide25-40">
                    {% endif %}


                </div>

            </div>


        </div>

























        {# COLUMN 2 -- COLUMN 1 ON DESKTOP #}
        <div class="col-xs-12 col-sm-12 col-md-3 col-md-pull-6 ">

            {% for i in 0..2 if articles[i] %}
                {# CARDS 6,7,8 #}
                {{this.render('../_single-article.twig', {
                    imageSize       : {width:95},
                    styleType       : "image-bottom",
                    position        : cardIndex, 
                    lazyload        : false,
                    article         : articles[articleCount],
                    site            : site,
                    swap            : false,
                    dev             : dev,
                    containerClass  : 'card-101-mobile card-101-tablet card-101-desktop-sm card-101-desktop-lg'
                }) | raw}}
                {% set articleCount = (dev) ? articleCount : articleCount + 1 %}
                {% set cardIndex = cardIndex + 1 %}
                {% if loop.index != 3  %}
                    <hr class="divide25-40">
                {% endif %}

            {% endfor %}


            {# ************ MOST POPULAR ************   #}
            <div class="c-section-header u-margin-top-30">
                <h2 class="c-section-header__h2 {{site}}">Most popular</h2>
            </div>
            <div class="leaderboard u-margin-top-13">
            {% for i in 0..4 if popularArticles[i] %}
                {{this.render('../_single-article.twig', {
                    article         : popularArticles[i], 
                    imageSuppress   : true,
                    swap            : false,
                    containerClass  : 'card-109-mobile card-109-tablet card-109-desktop-sm card-109-desktop-lg ' ~ site,
                    site            : site
                }) | raw}}
                <hr class="divide11-11">

            {% endfor %} 
            </div>
            {# ************ END ************   #}
        </div>


























        {# COLUMN 3 #}
        <div class="col-xs-12 col-sm-12 col-md-3">
            <div class="row u-margin-bottom-30">
                <div class="col-sm-1 col-md-12 hidden-xs hidden-sm u-desktop-indent-left-20">
                    <div class="weather j-weather-panel {{site}}"></div>
                    <div class="weather-dropdown j-weather-panel-dropdown hidden {{site}}"></div>
                    <hr class="divide10 visible-sm-block" style="margin-top: 50px;">
                </div>
            </div>


            {% for i in 0..1 if articles[i] %}
                {# CARDS 9, 10 #}
                {{this.render('../_single-article.twig', {
                    imageSize       : {width:95},
                    styleType       : "image-bottom",
                    position        : cardIndex, 
                    lazyload        : false,
                    article         : articles[articleCount],
                    site            : site,
                    swap            : false,
                    dev             : dev,
                    containerClass  : 'card-101-mobile card-101-tablet card-101-desktop-sm card-101-desktop-lg'
                }) | raw}}


                {% set articleCount = (dev) ? articleCount : articleCount + 1 %}
                {% set cardIndex = cardIndex + 1 %}
                <hr class="divide25-40">
            {% endfor %}

            <div class="ad-square u-margin-top-30 u-mobile-no-margin-top u-desktop-no-margin-top">
                <div class='advert-desktop' data-adsize="mrec"></div>
                {#<script async id="soft-point-banner" src="https://viztrade.com/api/banner.js?inventory=59"></script> #}
                <div class='advert-tablet' data-adsize="banner"></div>
                <div class='advert-mobile' data-adsize="mrec"></div>
            </div>
            <hr class="divide25-40">

            {% if articles[articleCount] %}
                {# CARD 11 #}
                {{this.render('../_single-article.twig', {
                    imageSize       : {width:95},
                    styleType       : "image-bottom",
                    position        : cardIndex, 
                    lazyload        : false,
                    article         : articles[articleCount],
                    site            : site,
                    swap            : false,
                    dev             : dev,
                    containerClass  : 'card-101-mobile card-101-tablet card-101-desktop-sm card-101-desktop-lg'
                }) | raw}}


                {% set articleCount = (dev) ? articleCount : articleCount + 1 %}
                {% set cardIndex = cardIndex + 1 %}
            {% endif %}


        </div>

    </div>

    <hr class="divide25-40">

    <div class="row">
            {% for i in 0..2 if articles[i] %}
            <div class="col-sm-4">
                {# CARDS 9, 10 #}
                {{this.render('../_single-article.twig', {
                    imageSize       : {height: 112, width:190},
                    position        : cardIndex, 
                    lazyload        : false,
                    article         : articles[articleCount],
                    site            : site,
                    swap            : false,
                    dev             : dev,
                    containerClass  : 'card-104-mobile card-104-tablet card-104-desktop-sm card-104-desktop-lg'
                }) | raw}}


                {% set articleCount = (dev) ? articleCount : articleCount + 1 %}
                {% set cardIndex = cardIndex + 1 %}
            </div>
            {% endfor %}

    </div>
    <hr class="divide25-40">
</section>


